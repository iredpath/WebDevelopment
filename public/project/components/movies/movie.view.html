<div *ngIf='!fetchingMovie' class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2">
  <h1 class="movie-title">{{omdbMovie.title}}</h1>
  <div class="col-sm-4 col-md-5">
    <img *ngIf="omdbMovie.image" class="movie-image" src={{movie.image}}>
    <div *ngIf="userService.getActiveUser()">
      <div *ngIf="possibleLibs.length > 0">
        <select [(ngModel)]="libraryId">
          <option *ngFor="#library of possibleLibs" value={{library._id}}>{{library.name}}</option>
        </select>
        <button class="btn btn-small" (click)="addMovie()">+</button>
      </div>
      <label for="my-rating">My Rating:</label>
      <div class="my-rating" (mouseleave)="clearPreview()" (mouseenter)="storeRating()">
        <span class="glyphicon clickable {{ myRating < 1 ? 'glyphicon-star-empty': 'glyphicon-star' }}"
          (mouseenter)="ratePreview(1)" (click)="rate(1)"></span>
        <span class="glyphicon clickable {{ myRating < 2 ? 'glyphicon-star-empty': 'glyphicon-star' }}"
          (mouseenter)="ratePreview(2)" (click)="rate(2)"></span>
        <span class="glyphicon clickable {{ myRating < 3 ? 'glyphicon-star-empty': 'glyphicon-star' }}"
          (mouseenter)="ratePreview(3)" (click)="rate(3)"></span>
        <span class="glyphicon clickable {{ myRating < 4 ? 'glyphicon-star-empty': 'glyphicon-star' }}"
          (mouseenter)="ratePreview(4)" (click)="rate(4)"></span>
        <span class="glyphicon clickable {{ myRating < 5 ? 'glyphicon-star-empty': 'glyphicon-star' }}"
          (mouseenter)="ratePreview(5)" (click)="rate(5)"></span>
      </div>
      <button class="btn btn-default" (click)="unrate()">Clear</button>

    </div>
  </div>
  <div class="col-sm-8 col-md-7">
    <div class="actors-container">
      <label for="actors">Actors:</label>
      <ul class="actors">
        <li *ngFor="#actor of omdbMovie.actors">{{actor}}</li>
      </ul>
    </div>
    <div>
      <label for="director">Directed By:</label>
      <span class="director">{{omdbMovie.directors}}</span>
    </div>
    <div>
      <label for="summary">Plot Summary:</label>
      <p class="summary">{{omdbMovie.plot}}</p>
    </div>
    <div>
      <label for="rating">Rated:</label>
      <span class="rating">{{omdbMovie.rating}}</span>
    </div>
    <div>
      <label for="released">Released on:</label>
      <span class="released">{{omdbMovie.releaseDate}}</span>
    </div>
    <div class="ratings-container">
      <label for="ratings">Average Rating:</label>
      <div class="ratings">
        <span class="glyphicon {{ avgRating < 1 ? 'glyphicon-star-empty': 'glyphicon-star' }}"></span>
        <span class="glyphicon {{ avgRating < 2 ? 'glyphicon-star-empty': 'glyphicon-star' }}"></span>
        <span class="glyphicon {{ avgRating < 3 ? 'glyphicon-star-empty': 'glyphicon-star' }}"></span>
        <span class="glyphicon {{ avgRating < 4 ? 'glyphicon-star-empty': 'glyphicon-star' }}"></span>
        <span class="glyphicon {{ avgRating < 5 ? 'glyphicon-star-empty': 'glyphicon-star' }}"></span>
        <span *ngIf="omdbMovie.tomatoMeter !== 'N/A'" class="rating-rt">
          <a href={{omdbMovie.tomatoUrl}}>{{omdbMovie.tomatoMeter}}% on rotton tomatoes</a>
        </span>
      </div>
    </div>
  </div>
  <div class="col-sm-12 col-md-12" *ngIf="!fetchingLibraries">
    <h3>Libraries With This Title</h3>
    <div class="movie-in-libraries">
      <div *ngFor="#library of movie.libraries" class="movie-in-library">
        <a class="thumbnail" [routerLink]="['/Library', { library: library._id }]">{{library.name}}</a>
      </div>
    </div>
  </div>
</div>